<?xml version="1.0" encoding="UTF-8"?>
<odoo>
  <record model="ir.actions.act_window" id="residence_list_action">
      <field name="name">Residences</field>
      <field name="res_model">residence.residence</field>
      <field name="view_mode">kanban,tree,form</field>
      <field name="help" type="html">
        <p class="o_view_nocontent_smiling_face">Create Residence</p>
      </field>
    </record>

    <record model="ir.ui.view" id="residence_tree_view">
      <field name="name">Residence Tree</field>
      <field name="model">residence.residence</field>
      <field name="arch" type="xml">
        <tree>
          <field name="name"/>
          <field name="type_id"/>
          <field name="street" optional="hide"/>
          <field name="city" optional="show"/>
          <field name="state_id" optional="show"/>
          <field name="zip" optional="show"/>
        </tree>
      </field>
    </record>

    <record model="ir.ui.view" id="residence_kanban_view">
      <field name="name">Residence kanban</field>
      <field name="model">residence.residence</field>
      <field name="arch" type="xml">
        <kanban sample="1">
          <field name="id"/>
          <field name="image"/>
          <field name="name"/>
          <field name="type_id"/>
          <field name="street"/>
          <field name="state_id"/>
          <field name="manager_id"/>
          <field name="email"/>
          <field name="phone"/>
          <templates>
            <t t-name="kanban-box">
              <div class="oe_kanban_global_click o_kanban_record_has_image_fill">
                <div class="o_kanban_image_fill_left o_kanban_image_full" t-attf-style="background-image: url(#{kanban_image('residence.residence', 'image', record.id.raw_value, placeholder)})" role="img"/>
                <div class="oe_kanban_details">
                  <div class="o_kanban_record_top">
                    <div class="o_kanban_record_headings">
                      <strong class="o_kanban_record_title">
                        <field name="name" placeholder="Residence's Name"/>
                      </strong>
                      <span t-if="record.type_id.raw_value" class="o_kanban_record_subtitle">
                        <field name="type_id"/>
                      </span>
                    </div>
                  </div>
                  <ul>
                    <li t-if="record.street.raw_value" class="o_text_overflow">
                      <field name="street"/>
                    </li>
                    <li t-if="record.state_id.raw_value" class="o_text_overflow">
                      <field name="state_id"/>
                    </li>
                    <li t-if="record.email.raw_value" class="o_force_ltr">
                      <field name="email"/>
                    </li>
                    <li t-if="record.phone.raw_value" class="o_force_ltr">
                      <field name="phone"/>
                    </li>
                    <li t-if="record.manager_id.raw_value" class="o_force_ltr">
                      <field name="manager_id"/>
                    </li>
                  </ul>
                </div>
              </div>
            </t>
          </templates>
        </kanban>
      </field>
    </record>

    <record model="ir.ui.view" id="residence_form_view">
      <field name="name">Residence Form</field>
      <field name="model">residence.residence</field>
      <field name="arch" type="xml">
        <form string="Residence Form">
          <sheet>
            <div class="oe_button_box" name="button_box">
            <!--<button name="helpdesk_mgmt.helpdesk_ticket_dashboard_action" type="action" class="oe_stat_button" icon="fa-life-ring">
                <div class="o_field_widget o_stat_info">
                  <span class="o_stat_text">Incidencias</span>
                </div>
              </button>
              <button name="action_see_project" type="object" class="oe_stat_button" icon="fa-check-square-o">
                <div class="o_field_widget o_stat_info">
                  <span class="o_stat_text">Activities</span>
                </div>
              </button>
              <button name="action_see_residents" type="object" class="oe_stat_button" icon="fa-users">
                <div class="o_field_widget o_stat_info">
                  <span class="o_stat_text">Residents</span>
                </div>
              </button>
              <button name="action_see_expenses" type="object" groups="residence_management.group_residence_manager,hr_expense.group_hr_expense_team_approver" class="oe_stat_button" icon="fa-money">
                <div class="o_field_widget o_stat_info">
                  <span class="o_stat_text">Expenses</span>
                </div>
              </button>
              <button name="action_see_journals" type="object" groups="residence_management.group_residence_manager" class="oe_stat_button" icon="fa-credit-card">
                <div class="o_field_widget o_stat_info">
                  <span class="o_stat_text">Journals</span>
                </div>
              </button>-->
            </div>
            <field name="image" widget='image' class="oe_avatar"/>
            <div class="oe_title">
              <h1>
                <field name="name" default_focus="1" placeholder="Name"/>
              </h1>
            </div>
            <group>
              <group>
                <label for="street" string="Address"/>
                <div class="o_address_format">
                  <field name="street" placeholder="Street..." class="o_address_street"/>
                  <field name="street2" placeholder="Street 2..." class="o_address_street"/>
                  <field name="city" placeholder="City" class="o_address_city"/>
                  <field name="state_id" class="o_address_state" placeholder="State" options="{'no_open': True, 'no_quick_create': True}" context="{'country_id': country_id, 'default_country_id': country_id, 'zip': zip}"/>
                  <field name="zip" placeholder="ZIP" class="o_address_zip"/>
                  <div name="partner_address_country" class="d-flex justify-content-between">
                    <field name="country_id" placeholder="Country" class="o_address_country" options="{&quot;no_open&quot;: True, &quot;no_create&quot;: True}"/>
                  </div>
                </div>
              </group>
              <group>
                <field name="type_id"/>
                <field name="manager_id"/>
                <field name="email"/>
                <field name="phone"/>
              </group>
            </group>
            <notebook>
              <page string="Details">
                <group>
                  <field name="description"/>
                  <field name="project_id"/>
                </group>
              </page>
              <page string="Rooms">
                <field name="room_ids">
                  <tree editable="bottom" decoration-success="full == False" decoration-danger="full == True" decoration-bf="full == False">
                    <field name="full" invisible="1"/>
                    <field name="name"/>
                    <field name="floor_id"/>
                    <field name="capacity"/>
                    <field name="bathroom"/>
                    <field name="sq_meters"/>
                    <field name="resident_ids" widget="many2many_tags"/>
                    <button type="object" name="action_show_residents" title="Residents" class="oe_stat_button" icon="fa-users"/>
                  </tree>
                </field>
              </page>
              <page string="Employees">
                <field name="employee_ids" widget="many2many" mode="kanban" />
              </page>
            </notebook>
          </sheet>
          <div class="oe_chatter">
            <field name="message_follower_ids" options="{'post_refresh':True}" groups="base.group_user"/>
            <field name="activity_ids"/>
            <field name="message_ids"/>
          </div>
        </form>
      </field>
    </record>

    <!--<record id="residence_action" model="ir.actions.server">
      <field name="name">Residence Action</field>
      <field name="model_id" ref="residence_management.model_rm_residence"/>
      <field name="state">code</field>
      <field name="code">action = model.action_residences()</field>
    </record>


    <menuitem id="main_residence_management_menu" name="Residence Management" web_icon="residence_management,static/description/odoo_icon.png" action="residence_action"/>-->
    <menuitem id="main_residence_management_menu" name="Residence Management" web_icon="medical_residence_base,static/description/odoo_icon.png" action="residence_list_action"/><!-- groups="medical_residence_mgmt.group_residence_employee"/>-->
    <menuitem id="sub_residence_management_menu" name="Residence" sequence="1" parent="main_residence_management_menu"></menuitem>
    <menuitem id="sub_residence_management_menu_residence" name="Residences" sequence="1" parent="sub_residence_management_menu" action="residence_list_action"></menuitem>

  <record model="ir.actions.act_window" id="residence_type_list_action">
    <field name="name">Residence Type</field>
    <field name="res_model">residence.type</field>
    <field name="view_mode">tree,form</field>
    <field name="help" type="html">
      <p class="o_view_nocontent_smiling_face">Create Residence Type</p>
    </field>
  </record>
  <record model="ir.ui.view" id="residence_type_tree_view">
    <field name="name">Residence Type Tree</field>
    <field name="model">residence.type</field>
    <field name="arch" type="xml">
      <tree editable="bottom">
        <field name="name"/>
      </tree>
    </field>
  </record>

    <menuitem id="configuration_menu" name="Configuration" parent="main_residence_management_menu"/>
    <menuitem id="residence_type_menu" name="Residence Types" parent="configuration_menu" action="residence_type_list_action"/>
</odoo>
